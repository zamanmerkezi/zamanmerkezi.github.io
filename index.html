<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <meta name="google-adsense-account" content="ca-pub-3214692314578267" />
  <title>ZAMAN MERKEZƒ∞ ‚è∞ ‚Äî v2.1</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
  <meta name="theme-color" content="#00bfff" />

  <style>
    :root {
      --bg: linear-gradient(135deg, #0b1220, #09203f, #00bfff);
      --text: #fff;
      --card: rgba(255,255,255,0.1);
    }
    body.light {
      --bg: linear-gradient(135deg, #e6f4ff, #ffffff);
      --text: #222;
      --card: rgba(0,0,0,0.05);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      transition: background 0.5s, color 0.5s;
    }
    h1 {
      font-size: 2rem;
      margin: 10px 0;
    }
    .section {
      background: var(--card);
      border-radius: 15px;
      padding: 20px;
      margin: 10px;
      width: 95%;
      max-width: 420px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    textarea, input, select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      margin: 5px 0;
      font-size: 1rem;
    }
    button {
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      margin: 5px;
      background: #00bfff;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
    .display { font-size: 1.6rem; margin: 10px 0; }
    .clock { font-size: 2.5rem; font-weight: bold; }
    #installBtn { display: none; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>‚è∞ ZAMAN MERKEZƒ∞ v2.1</h1>
  <div class="clock" id="clock">00:00:00</div>
  <div id="weather">üå§Ô∏è Hava durumu y√ºkleniyor...</div>

  <!-- Tema Se√ßimi -->
  <div class="section">
    <h2>üé® Tema Se√ßimi</h2>
    <select id="themeSelect">
      <option value="auto">Otomatik</option>
      <option value="light">A√ßƒ±k</option>
      <option value="dark">Koyu</option>
    </select>
  </div>

  <!-- Not Defteri -->
  <div class="section">
    <h2>üìù Not Defteri</h2>
    <textarea id="notes" placeholder="Notlarƒ±nƒ± yaz..."></textarea>
    <button onclick="saveNotes()">Kaydet</button>
    <button onclick="clearNotes()">Sil</button>
  </div>

  <!-- Kronometre -->
  <div class="section">
    <h2>‚è± Kronometre</h2>
    <div id="stopwatchDisplay" class="display">00:00:00.000</div>
    <button onclick="startStopwatch()">Ba≈ülat</button>
    <button onclick="stopStopwatch()">Durdur</button>
    <button onclick="resetStopwatch()">Sƒ±fƒ±rla</button>
  </div>

  <!-- Geri Sayƒ±m -->
  <div class="section">
    <h2>‚è≥ Geri Sayƒ±m</h2>
    <input type="number" id="countdownInput" placeholder="S√ºre (saniye)" />
    <input type="datetime-local" id="dateCountdown" />
    <div id="countdownDisplay" class="display">00:00</div>
    <button onclick="startCountdown()">Ba≈ülat</button>
    <button onclick="stopCountdown()">Durdur</button>
    <button onclick="resetCountdown()">Sƒ±fƒ±rla</button>
  </div>

  <!-- Alarm -->
  <div class="section">
    <h2>üîî Alarm</h2>
    <input type="time" id="alarmTime" />
    <button onclick="setAlarm()">Kur</button>
    <button onclick="clearAlarm()">Kapat</button>
    <div id="alarmStatus">Alarm yok</div>
  </div>

  <button id="installBtn">üì≤ Ana Ekrana Ekle</button>

  <script>
    // üïí SAAT
    setInterval(() => {
      const now = new Date();
      document.getElementById("clock").textContent = now.toLocaleTimeString("tr-TR");
    }, 1000);

    // üå¶Ô∏è HAVA DURUMU
    async function getWeather() {
      try {
        const res = await fetch("https://api.open-meteo.com/v1/forecast?latitude=41.01&longitude=28.97&current_weather=true");
        const d = await res.json();
        document.getElementById("weather").textContent = `üå° ${d.current_weather.temperature}¬∞C | üí® ${d.current_weather.windspeed} km/s`;
      } catch {
        document.getElementById("weather").textContent = "‚ùå Hava durumu alƒ±namadƒ±";
      }
    }
    getWeather();

    // üìù NOT DEFTERƒ∞
    const note = document.getElementById("notes");
    note.value = localStorage.getItem("notes") || "";
    function saveNotes() { localStorage.setItem("notes", note.value); alert("‚úÖ Kaydedildi"); }
    function clearNotes() { note.value = ""; localStorage.removeItem("notes"); }

    // ‚è± KRONOMETRE
    let swInt, swStart, elapsed = 0;
    function startStopwatch() {
      if (swInt) return;
      swStart = Date.now() - elapsed;
      swInt = setInterval(() => {
        elapsed = Date.now() - swStart;
        const ms = String(elapsed % 1000).padStart(3, "0");
        const s = String(Math.floor(elapsed / 1000) % 60).padStart(2, "0");
        const m = String(Math.floor(elapsed / 60000) % 60).padStart(2, "0");
        const h = String(Math.floor(elapsed / 3600000)).padStart(2, "0");
        document.getElementById("stopwatchDisplay").textContent = `${h}:${m}:${s}.${ms}`;
      }, 10);
    }
    function stopStopwatch() { clearInterval(swInt); swInt = null; }
    function resetStopwatch() { stopStopwatch(); elapsed = 0; document.getElementById("stopwatchDisplay").textContent = "00:00:00.000"; }

    // ‚è≥ GERƒ∞ SAYIM
    let cdInt, cdTime = 0;
    function startCountdown() {
      if (cdInt) return;
      const userInput = document.getElementById("countdownInput").value;
      const dateInput = document.getElementById("dateCountdown").value;
      if (dateInput) {
        cdTime = new Date(dateInput) - new Date();
      } else {
        cdTime = parseInt(userInput || "0") * 1000;
      }
      if (cdTime <= 0) return alert("Ge√ßerli bir s√ºre gir!");
      cdInt = setInterval(() => {
        cdTime -= 1000;
        if (cdTime <= 0) {
          resetCountdown();
          alert("‚è∞ S√ºre doldu!");
        } else {
          const t = Math.floor(cdTime / 1000);
          const m = String(Math.floor(t / 60)).padStart(2,"0");
          const s = String(t % 60).padStart(2,"0");
          document.getElementById("countdownDisplay").textContent = `${m}:${s}`;
        }
      }, 1000);
    }
    function stopCountdown() { clearInterval(cdInt); cdInt = null; }
    function resetCountdown() {
      clearInterval(cdInt); cdInt = null; cdTime = 0;
      document.getElementById("countdownDisplay").textContent = "00:00";
    }

    // üîî ALARM
    let alarmTime = null, alarmActive = false;
    function setAlarm() {
      alarmTime = document.getElementById("alarmTime").value;
      if (!alarmTime) return alert("Saat se√ß!");
      alarmActive = true;
      document.getElementById("alarmStatus").textContent = "‚è∞ Alarm kuruldu: " + alarmTime;
    }
    function clearAlarm() {
      alarmActive = false;
      document.getElementById("alarmStatus").textContent = "Alarm yok";
    }
    setInterval(() => {
      if (alarmActive) {
        const now = new Date();
        const current = now.toTimeString().slice(0,5);
        if (current === alarmTime) {
          alert("üîî Alarm zamanƒ±!");
          const audio = new Audio("https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg");
          audio.play();
          clearAlarm();
        }
      }
    }, 1000);

    // üåó TEMA
    const themeSelect = document.getElementById("themeSelect");
    function applyTheme(mode) {
      if (mode === "light") document.body.classList.add("light");
      else if (mode === "dark") document.body.classList.remove("light");
      else if (window.matchMedia("(prefers-color-scheme: light)").matches)
        document.body.classList.add("light");
      else document.body.classList.remove("light");
    }
    themeSelect.onchange = () => applyTheme(themeSelect.value);
    applyTheme("auto");

    // üì≤ PWA
    if ("serviceWorker" in navigator) navigator.serviceWorker.register("service-worker.js");
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");
    window.addEventListener("beforeinstallprompt", e => {
      e.preventDefault(); deferredPrompt = e; installBtn.style.display = "block";
    });
    installBtn.addEventListener("click", async () => {
      deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt = null; installBtn.style.display = "none";
    });
  </script>
</body>
</html>
